{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://ngx-drag-to-select/lib/tokens.ts","ng://ngx-drag-to-select/lib/constants.ts","ng://ngx-drag-to-select/lib/utils.ts","ng://ngx-drag-to-select/lib/select-item.directive.ts","ng://ngx-drag-to-select/lib/shortcut.service.ts","ng://ngx-drag-to-select/lib/operators.ts","ng://ngx-drag-to-select/lib/models.ts","ng://ngx-drag-to-select/lib/select-container.component.ts","ng://ngx-drag-to-select/lib/config.ts","ng://ngx-drag-to-select/lib/drag-to-select.module.ts"],"names":["__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spread","arguments","length","concat","CONFIG","InjectionToken","USER_CONFIG","NO_SELECT_CLASS","isObject","item","Array","isArray","mergeDeep","target","source","Object","keys","forEach","key","assign","_a","_b","hasMinimumSize","selectBox","minWidth","minHeight","width","height","inBoundingBox","point","box","left","x","top","y","boxIntersects","boxA","boxB","calculateBoundingClientRect","element","getBoundingClientRect","getMousePosition","event","clientX","clientY","getRelativeMousePosition","container","scroll","document","documentElement","scrollLeft","body","scrollTop","borderSize","boundingClientRect","clientWidth","offsetLeft","offsetTop","window","pageXOffset","pageYOffset","SelectItemDirective","config","platformId","host","renderer","this","selected","defineProperty","prototype","dtsSelectItem","ngOnInit","isPlatformBrowser","ngDoCheck","applySelectedClass","_boundingClientRect","nativeElement","_select","_deselect","addClass","selectedClass","removeClass","Directive","args","selector","exportAs","class","Inject","PLATFORM_ID","ElementRef","Renderer2","Input","SUPPORTED_KEYS","alt","shift","meta","ctrl","META_KEY","KEY_ALIASES","SUPPORTED_SHORTCUTS","disableSelection","toggleSingleItem","addToSelection","removeFromSelection","ShortcutService","_shortcuts","createShortcutsFromConfig","shortcuts","isShortcutPressed","extendedSelectionShortcut","_this","shortcutMap","shortcutsForCommand","this_1","isSupportedShortcut","Error","getErrorMessage","replace","split","shortcut","combo","substituteKey","cleanCombo","unsupportedKey","isSupportedCombo","map","comboKey","__values","tslib_1.__values","entries","_c","_d","hasSpecialKey","includes","substitutedShortcut","cleanShortcut_1","filter","alias","message","ERROR_PREFIX","shortcutName","some","every","Injectable","distinctKeyEvents","pipe","distinctUntilChanged","prev","curr","keyCode","Add","Remove","Delete","None","SelectContainerComponent","hostElementRef","ngZone","selectOnDrag","disabled","disableDrag","selectMode","selectWithShortcut","custom","selectedItemsChange","EventEmitter","select","itemSelected","itemDeselected","selectionStarted","selectionEnded","_tmpItems","Map","_selectedItems$","BehaviorSubject","updateItems$","Subject","destroy$","ngAfterViewInit","selectBox$","_initSelectedItemsChange","_calculateBoundingClientRect","_observeBoundingRectChanges","_observeSelectableItems","keydown$","fromEvent","share","keyup$","mouseup$_1","tap","_onMouseUp","mousemove$_1","mousedown$","button","_onMouseDown","dragging$","switchMap","takeUntil","currentMousePosition$","show$","mapTo","hide$","opacity$","merge","combineLatest","opacity","mousePosition","Math","abs","selectBoxClasses$","auditTime","withLatestFrom","dts-adding","dts-removing","a","b","JSON","stringify","selectOnMouseUp$","_cursorWithinHost","_","first","selectOnDrag$","selectOnKeyboardEvent$","_isExtendedSelection","clear","_flushItems","subscribe","_selectItems","selectBoxStyles$","_initSelectionOutputs","selectAll","$selectableItems","_selectItem","toggleItems","predicate","_filterSelectableItems","_toggleItem","selectItems","deselectItems","_deselectItem","clearSelection","update","ngOnDestroy","complete","from","toArray","selectedItems","emit","type","UpdateActions","_addItem","_removeItem","changes","observeOn","asyncScheduler","items","newList","removedItems","runOutsideAngular","resize$","windowScroll$","containerScroll$","startWith","mouseup$","concatMapTo","mousePoint","selection","getSelection","removeAllRanges","empty","index","itemRect","withinBoundingBox","shouldAdd","shouldRemove","selectionBox","$selectBox","_extendedSelectionMode","_normalSelectionMode","inSelection","shoudlAdd","has","action","Action","set","delete","success","_hasItem","indexOf","splice","Component","template","NgZone","ViewChild","ContentChildren","descendants","HostBinding","Output","DEFAULT_CONFIG","COMPONENTS","CONFIG_FACTORY","DragToSelectModule","forRoot","ngModule","providers","provide","useValue","useFactory","deps","NgModule","imports","CommonModule","declarations","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { InjectionToken } from '@angular/core';\nimport { DragToSelectConfig } from './models';\n\nexport const CONFIG = new InjectionToken<DragToSelectConfig>('DRAG_TO_SELECT_CONFIG');\nexport const USER_CONFIG = new InjectionToken<DragToSelectConfig>('USER_CONFIG');\n","export const AUDIT_TIME = 16;\nexport const MIN_WIDTH = 5;\nexport const MIN_HEIGHT = 5;\nexport const NO_SELECT_CLASS = 'dts-no-select';\n","import { MIN_HEIGHT, MIN_WIDTH } from './constants';\nimport { BoundingBox, MousePosition, SelectBox, SelectContainerHost } from './models';\n\nexport const isObject = (item: any) => {\n  return item && typeof item === 'object' && !Array.isArray(item) && item !== null;\n};\n\nexport function mergeDeep(target: Object, source: Object) {\n  if (isObject(target) && isObject(source)) {\n    Object.keys(source).forEach(key => {\n      if (isObject(source[key])) {\n        if (!target[key]) {\n          Object.assign(target, { [key]: {} });\n        }\n        mergeDeep(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    });\n  }\n\n  return target;\n}\n\nexport const hasMinimumSize = (selectBox: SelectBox<number>, minWidth = MIN_WIDTH, minHeight = MIN_HEIGHT) => {\n  return selectBox.width > minWidth || selectBox.height > minHeight;\n};\n\nexport const clearSelection = (window: Window) => {\n  const selection = window.getSelection();\n\n  if (selection.removeAllRanges) {\n    selection.removeAllRanges();\n  } else if (selection.empty) {\n    selection.empty();\n  }\n};\n\nexport const inBoundingBox = (point: MousePosition, box: BoundingBox) => {\n  return (\n    box.left <= point.x && point.x <= box.left + box.width && box.top <= point.y && point.y <= box.top + box.height\n  );\n};\n\nexport const boxIntersects = (boxA: BoundingBox, boxB: BoundingBox) => {\n  return (\n    boxA.left <= boxB.left + boxB.width &&\n    boxA.left + boxA.width >= boxB.left &&\n    boxA.top <= boxB.top + boxB.height &&\n    boxA.top + boxA.height >= boxB.top\n  );\n};\n\nexport const calculateBoundingClientRect = (element: HTMLElement): BoundingBox => {\n  return element.getBoundingClientRect();\n};\n\nexport const getMousePosition = (event: MouseEvent) => {\n  return {\n    x: event.clientX,\n    y: event.clientY\n  };\n};\n\nexport const getScroll = () => {\n  if (!document || !document.documentElement) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    x: document.documentElement.scrollLeft || document.body.scrollLeft,\n    y: document.documentElement.scrollTop || document.body.scrollTop\n  };\n};\n\nexport const getRelativeMousePosition = (event: MouseEvent, container: SelectContainerHost): MousePosition => {\n  const { x: clientX, y: clientY } = getMousePosition(event);\n  const scroll = getScroll();\n\n  const borderSize = (container.boundingClientRect.width - container.clientWidth) / 2;\n  const offsetLeft = container.boundingClientRect.left + scroll.x;\n  const offsetTop = container.boundingClientRect.top + scroll.y;\n\n  return {\n    x: clientX - borderSize - (offsetLeft - window.pageXOffset) + container.scrollLeft,\n    y: clientY - borderSize - (offsetTop - window.pageYOffset) + container.scrollTop\n  };\n};\n\nexport const cursorWithinElement = (event: MouseEvent, element: HTMLElement) => {\n  const mousePoint = getMousePosition(event);\n  return inBoundingBox(mousePoint, calculateBoundingClientRect(element));\n};\n","import { isPlatformBrowser } from '@angular/common';\n\nimport {\n  Directive,\n  DoCheck,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  OnInit,\n  Output,\n  PLATFORM_ID,\n  Renderer2\n} from '@angular/core';\n\nimport { DragToSelectConfig } from './models';\nimport { CONFIG } from './tokens';\nimport { calculateBoundingClientRect } from './utils';\n\n@Directive({\n  selector: '[dtsSelectItem]',\n  exportAs: 'dtsSelectItem',\n  host: {\n    class: 'dts-select-item'\n  }\n})\nexport class SelectItemDirective implements OnInit, DoCheck {\n  private _boundingClientRect;\n\n  selected = false;\n\n  @Input()\n  dtsSelectItem;\n\n  get value() {\n    return this.dtsSelectItem ? this.dtsSelectItem : this;\n  }\n\n  constructor(\n    @Inject(CONFIG) private config: DragToSelectConfig,\n    @Inject(PLATFORM_ID) private platformId,\n    private host: ElementRef,\n    private renderer: Renderer2\n  ) {}\n\n  ngOnInit() {\n    if (isPlatformBrowser(this.platformId)) {\n      this.calculateBoundingClientRect();\n    }\n  }\n\n  ngDoCheck() {\n    this.applySelectedClass();\n  }\n\n  getBoundingClientRect() {\n    return this._boundingClientRect;\n  }\n\n  calculateBoundingClientRect() {\n    this._boundingClientRect = calculateBoundingClientRect(this.host.nativeElement);\n  }\n\n  _select() {\n    this.selected = true;\n  }\n\n  _deselect() {\n    this.selected = false;\n  }\n\n  private applySelectedClass() {\n    if (this.selected) {\n      this.renderer.addClass(this.host.nativeElement, this.config.selectedClass);\n    } else {\n      this.renderer.removeClass(this.host.nativeElement, this.config.selectedClass);\n    }\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { DragToSelectConfig } from './models';\nimport { CONFIG } from './tokens';\n\nconst SUPPORTED_KEYS = {\n  alt: true,\n  shift: true,\n  meta: true,\n  ctrl: true\n};\n\nconst META_KEY = 'meta';\n\nconst KEY_ALIASES = {\n  [META_KEY]: ['ctrl', 'meta']\n};\n\nconst SUPPORTED_SHORTCUTS = {\n  disableSelection: true,\n  toggleSingleItem: true,\n  addToSelection: true,\n  removeFromSelection: true\n};\n\nconst ERROR_PREFIX = '[ShortcutService]';\n\n@Injectable()\nexport class ShortcutService {\n  private _shortcuts: { [key: string]: string[][] } = {};\n\n  constructor(@Inject(CONFIG) private config: DragToSelectConfig) {\n    this._shortcuts = this.createShortcutsFromConfig(config.shortcuts);\n  }\n\n  disableSelection(event: Event) {\n    return this.isShortcutPressed('disableSelection', event);\n  }\n\n  toggleSingleItem(event: Event) {\n    return this.isShortcutPressed('toggleSingleItem', event);\n  }\n\n  addToSelection(event: Event) {\n    return this.isShortcutPressed('addToSelection', event);\n  }\n\n  removeFromSelection(event: Event) {\n    return this.isShortcutPressed('removeFromSelection', event);\n  }\n\n  extendedSelectionShortcut(event: Event) {\n    return this.addToSelection(event) || this.removeFromSelection(event);\n  }\n\n  private createShortcutsFromConfig(shortcuts: { [key: string]: string }) {\n    const shortcutMap = {};\n\n    for (const [key, shortcutsForCommand] of Object.entries(shortcuts)) {\n      if (!this.isSupportedShortcut(key)) {\n        throw new Error(this.getErrorMessage(`Shortcut ${key} not supported`));\n      }\n\n      shortcutsForCommand\n        .replace(/ /g, '')\n        .split(',')\n        .forEach(shortcut => {\n          if (!shortcutMap[key]) {\n            shortcutMap[key] = [];\n          }\n\n          const combo = shortcut.split('+');\n          const cleanCombos = this.substituteKey(shortcut, combo, META_KEY);\n\n          cleanCombos.forEach(cleanCombo => {\n            const unsupportedKey = this.isSupportedCombo(cleanCombo);\n\n            if (unsupportedKey) {\n              throw new Error(this.getErrorMessage(`Key '${unsupportedKey}' in shortcut ${shortcut} not supported`));\n            }\n\n            shortcutMap[key].push(cleanCombo.map(comboKey => `${comboKey}Key`));\n          });\n        });\n    }\n\n    return shortcutMap;\n  }\n\n  private substituteKey(shortcut: string, combo: Array<string>, substituteKey: string) {\n    const hasSpecialKey = shortcut.includes(substituteKey);\n    const substitutedShortcut = [];\n\n    if (hasSpecialKey) {\n      const cleanShortcut = combo.filter(element => element !== META_KEY);\n\n      KEY_ALIASES.meta.forEach(alias => {\n        substitutedShortcut.push([...cleanShortcut, alias]);\n      });\n    } else {\n      substitutedShortcut.push(combo);\n    }\n\n    return substitutedShortcut;\n  }\n\n  private getErrorMessage(message: string) {\n    return `${ERROR_PREFIX} ${message}`;\n  }\n\n  private isShortcutPressed(shortcutName: string, event: Event) {\n    const shortcuts = this._shortcuts[shortcutName];\n\n    return shortcuts.some(shortcut => {\n      return shortcut.every(key => event[key]);\n    });\n  }\n\n  private isSupportedCombo(combo: Array<string>) {\n    let unsupportedKey = null;\n\n    combo.forEach(key => {\n      if (!SUPPORTED_KEYS[key]) {\n        unsupportedKey = key;\n        return;\n      }\n    });\n\n    return unsupportedKey;\n  }\n\n  private isSupportedShortcut(shortcut: string) {\n    return SUPPORTED_SHORTCUTS[shortcut];\n  }\n}\n","import { Observable, pipe } from 'rxjs';\nimport { filter, map, withLatestFrom, distinctUntilChanged } from 'rxjs/operators';\nimport { MousePosition, SelectBox, SelectBoxInput, SelectContainerHost } from './models';\nimport { getRelativeMousePosition, hasMinimumSize } from './utils';\n\nexport const createSelectBox = (container: SelectContainerHost) => (\n  source: Observable<SelectBoxInput>\n): Observable<SelectBox<number>> =>\n  source.pipe(\n    map(([event, opacity, { x, y }]) => {\n      // Type annotation is required here, because `getRelativeMousePosition` returns a `MousePosition`,\n      // the TS compiler cannot figure out the shape of this type.\n      const mousePosition: MousePosition = getRelativeMousePosition(event, container);\n\n      const width = opacity > 0 ? mousePosition.x - x : 0;\n      const height = opacity > 0 ? mousePosition.y - y : 0;\n\n      return {\n        top: height < 0 ? mousePosition.y : y,\n        left: width < 0 ? mousePosition.x : x,\n        width: Math.abs(width),\n        height: Math.abs(height),\n        opacity\n      };\n    })\n  );\n\nexport const whenSelectBoxVisible = (selectBox$: Observable<SelectBox<number>>) => (source: Observable<Event>) =>\n  source.pipe(\n    withLatestFrom(selectBox$),\n    filter(([, selectBox]) => hasMinimumSize(selectBox, 0, 0)),\n    map(([event, _]) => event)\n  );\n\nexport const distinctKeyEvents = () => (source: Observable<KeyboardEvent>) =>\n  source.pipe(\n    distinctUntilChanged((prev, curr) => {\n      return prev.keyCode === curr.keyCode;\n    })\n  );\n","import { Observable } from 'rxjs';\nimport { SelectItemDirective } from './select-item.directive';\n\nexport type PredicateFn<T> = (item: T) => boolean;\n\nexport enum UpdateActions {\n  Add,\n  Remove\n}\n\nexport interface UpdateAction {\n  type: UpdateActions;\n  item: SelectItemDirective;\n}\n\nexport interface ObservableProxy<T> {\n  proxy$: Observable<any>;\n  proxy: T;\n}\n\nexport interface SelectContainerHost extends HTMLElement {\n  boundingClientRect: BoundingBox;\n}\n\nexport interface Shortcuts {\n  disableSelection: string;\n  toggleSingleItem: string;\n  addToSelection: string;\n  removeFromSelection: string;\n}\n\nexport interface DragToSelectConfig {\n  selectedClass: string;\n  shortcuts: Partial<Shortcuts>;\n}\n\nexport interface MousePosition {\n  x: number;\n  y: number;\n}\n\nexport interface BoundingBox {\n  top: number;\n  left: number;\n  width: number;\n  height: number;\n}\n\nexport type SelectBoxInput = [MouseEvent, number, MousePosition];\n\nexport interface SelectBox<T> {\n  top: T;\n  left: T;\n  width: T;\n  height: T;\n  opacity: number;\n}\n\nexport enum Action {\n  Add,\n  Delete,\n  None\n}\n","import {\n  Component,\n  ElementRef,\n  Output,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  Renderer2,\n  ViewChild,\n  NgZone,\n  ContentChildren,\n  QueryList,\n  HostBinding,\n  AfterViewInit,\n  PLATFORM_ID,\n  Inject\n} from '@angular/core';\n\nimport { isPlatformBrowser } from '@angular/common';\n\nimport { Observable, Subject, combineLatest, merge, from, fromEvent, BehaviorSubject, asyncScheduler } from 'rxjs';\n\nimport {\n  switchMap,\n  takeUntil,\n  map,\n  tap,\n  filter,\n  auditTime,\n  mapTo,\n  share,\n  withLatestFrom,\n  distinctUntilChanged,\n  observeOn,\n  startWith,\n  concatMapTo,\n  first\n} from 'rxjs/operators';\n\nimport { SelectItemDirective } from './select-item.directive';\nimport { ShortcutService } from './shortcut.service';\n\nimport { createSelectBox, whenSelectBoxVisible, distinctKeyEvents } from './operators';\n\nimport {\n  Action,\n  SelectBox,\n  MousePosition,\n  SelectContainerHost,\n  UpdateAction,\n  UpdateActions,\n  PredicateFn\n} from './models';\n\nimport { AUDIT_TIME, NO_SELECT_CLASS } from './constants';\n\nimport {\n  inBoundingBox,\n  cursorWithinElement,\n  clearSelection,\n  boxIntersects,\n  calculateBoundingClientRect,\n  getRelativeMousePosition,\n  getMousePosition,\n  hasMinimumSize\n} from './utils';\n\n@Component({\n  selector: 'dts-select-container',\n  exportAs: 'dts-select-container',\n  host: {\n    class: 'dts-select-container'\n  },\n  template: `\n    <ng-content></ng-content>\n    <div\n      class=\"dts-select-box\"\n      #selectBox\n      [ngClass]=\"selectBoxClasses$ | async\"\n      [ngStyle]=\"selectBoxStyles$ | async\"\n    ></div>\n  `,\n  styleUrls: ['./select-container.component.scss']\n})\nexport class SelectContainerComponent implements AfterViewInit, OnDestroy {\n  host: SelectContainerHost;\n  selectBoxStyles$: Observable<SelectBox<string>>;\n  selectBoxClasses$: Observable<{ [key: string]: boolean }>;\n\n  @ViewChild('selectBox')\n  private $selectBox: ElementRef;\n\n  @ContentChildren(SelectItemDirective, { descendants: true })\n  private $selectableItems: QueryList<SelectItemDirective>;\n\n  @Input()\n  selectedItems: any;\n\n  @Input()\n  selectOnDrag = true;\n\n  @Input()\n  disabled = false;\n\n  @Input()\n  disableDrag = false;\n\n  @Input()\n  selectMode = false;\n\n  @Input()\n  selectWithShortcut = false;\n\n  @Input()\n  @HostBinding('class.dts-custom')\n  custom = false;\n\n  @Output()\n  selectedItemsChange = new EventEmitter<any>();\n\n  @Output()\n  select = new EventEmitter<any>();\n\n  @Output()\n  itemSelected = new EventEmitter<any>();\n\n  @Output()\n  itemDeselected = new EventEmitter<any>();\n\n  @Output()\n  selectionStarted = new EventEmitter<void>();\n\n  @Output()\n  selectionEnded = new EventEmitter<Array<any>>();\n\n  private _tmpItems = new Map<SelectItemDirective, Action>();\n\n  private _selectedItems$ = new BehaviorSubject<Array<any>>([]);\n  private updateItems$ = new Subject<UpdateAction>();\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    @Inject(PLATFORM_ID) private platformId,\n    private shortcuts: ShortcutService,\n    private hostElementRef: ElementRef,\n    private renderer: Renderer2,\n    private ngZone: NgZone\n  ) {}\n\n  ngAfterViewInit() {\n    if (isPlatformBrowser(this.platformId)) {\n      this.host = this.hostElementRef.nativeElement;\n\n      this._initSelectedItemsChange();\n\n      this._calculateBoundingClientRect();\n      this._observeBoundingRectChanges();\n      this._observeSelectableItems();\n\n      // distinctKeyEvents is used to prevent multiple key events to be fired repeatedly\n      // on Windows when a key is being pressed\n\n      const keydown$ = fromEvent<KeyboardEvent>(window, 'keydown').pipe(\n        distinctKeyEvents(),\n        share()\n      );\n\n      const keyup$ = fromEvent<KeyboardEvent>(window, 'keyup').pipe(\n        distinctKeyEvents(),\n        share()\n      );\n\n      const mouseup$ = fromEvent<MouseEvent>(window, 'mouseup').pipe(\n        filter(() => !this.disabled),\n        tap(() => this._onMouseUp()),\n        share()\n      );\n\n      const mousemove$ = fromEvent<MouseEvent>(window, 'mousemove').pipe(\n        filter(() => !this.disabled),\n        share()\n      );\n\n      const mousedown$ = fromEvent<MouseEvent>(this.host, 'mousedown').pipe(\n        filter(event => event.button === 0), // only emit left mouse\n        filter(() => !this.disabled),\n        tap(event => this._onMouseDown(event)),\n        share()\n      );\n\n      const dragging$ = mousedown$.pipe(\n        filter(event => !this.shortcuts.disableSelection(event)),\n        filter(() => !this.selectMode),\n        filter(() => !this.disableDrag),\n        switchMap(() => mousemove$.pipe(takeUntil(mouseup$))),\n        share()\n      );\n\n      const currentMousePosition$: Observable<MousePosition> = mousedown$.pipe(\n        map((event: MouseEvent) => getRelativeMousePosition(event, this.host))\n      );\n\n      const show$ = dragging$.pipe(mapTo(1));\n      const hide$ = mouseup$.pipe(mapTo(0));\n      const opacity$ = merge(show$, hide$).pipe(distinctUntilChanged());\n\n      const selectBox$ = combineLatest(dragging$, opacity$, currentMousePosition$).pipe(\n        createSelectBox(this.host),\n        share()\n      );\n\n      this.selectBoxClasses$ = merge(dragging$, mouseup$, keydown$, keyup$).pipe(\n        auditTime(AUDIT_TIME),\n        withLatestFrom(selectBox$),\n        map(([event, selectBox]) => {\n          return {\n            'dts-adding': hasMinimumSize(selectBox, 0, 0) && !this.shortcuts.removeFromSelection(event),\n            'dts-removing': this.shortcuts.removeFromSelection(event)\n          };\n        }),\n        distinctUntilChanged((a, b) => JSON.stringify(a) === JSON.stringify(b))\n      );\n\n      const selectOnMouseUp$ = dragging$.pipe(\n        filter(() => !this.selectOnDrag),\n        filter(() => !this.selectMode),\n        filter(event => this._cursorWithinHost(event)),\n        switchMap(_ => mouseup$.pipe(first())),\n        filter(\n          event =>\n            (!this.shortcuts.disableSelection(event) && !this.shortcuts.toggleSingleItem(event)) ||\n            this.shortcuts.removeFromSelection(event)\n        )\n      );\n\n      const selectOnDrag$ = selectBox$.pipe(\n        auditTime(AUDIT_TIME),\n        withLatestFrom(mousemove$, (selectBox, event: MouseEvent) => ({\n          selectBox,\n          event\n        })),\n        filter(() => this.selectOnDrag),\n        filter(({ selectBox }) => hasMinimumSize(selectBox)),\n        map(({ event }) => event)\n      );\n\n      const selectOnKeyboardEvent$ = merge(keydown$, keyup$).pipe(\n        auditTime(AUDIT_TIME),\n        whenSelectBoxVisible(selectBox$),\n        tap(event => {\n          if (this._isExtendedSelection(event)) {\n            this._tmpItems.clear();\n          } else {\n            this._flushItems();\n          }\n        })\n      );\n\n      merge(selectOnMouseUp$, selectOnDrag$, selectOnKeyboardEvent$)\n        .pipe(takeUntil(this.destroy$))\n        .subscribe(event => this._selectItems(event));\n\n      this.selectBoxStyles$ = selectBox$.pipe(\n        map(selectBox => ({\n          top: `${selectBox.top}px`,\n          left: `${selectBox.left}px`,\n          width: `${selectBox.width}px`,\n          height: `${selectBox.height}px`,\n          opacity: selectBox.opacity\n        }))\n      );\n\n      this._initSelectionOutputs(mousedown$, mouseup$);\n    }\n  }\n\n  selectAll() {\n    this.$selectableItems.forEach(item => {\n      this._selectItem(item);\n    });\n  }\n\n  toggleItems<T>(predicate: PredicateFn<T>) {\n    this._filterSelectableItems(predicate).subscribe((item: SelectItemDirective) => this._toggleItem(item));\n  }\n\n  selectItems<T>(predicate: PredicateFn<T>) {\n    this._filterSelectableItems(predicate).subscribe((item: SelectItemDirective) => this._selectItem(item));\n  }\n\n  deselectItems<T>(predicate: PredicateFn<T>) {\n    this._filterSelectableItems(predicate).subscribe((item: SelectItemDirective) => this._deselectItem(item));\n  }\n\n  clearSelection() {\n    this.$selectableItems.forEach(item => {\n      this._deselectItem(item);\n    });\n  }\n\n  update() {\n    this._calculateBoundingClientRect();\n    this.$selectableItems.forEach(item => item.calculateBoundingClientRect());\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  private _filterSelectableItems<T>(predicate: PredicateFn<T>) {\n    // Wrap select items in an observable for better efficiency as\n    // no intermediate arrays are created and we only need to process\n    // every item once.\n    return from(this.$selectableItems.toArray()).pipe(filter(item => predicate(item.value)));\n  }\n\n  private _initSelectedItemsChange() {\n    this._selectedItems$\n      .pipe(\n        auditTime(AUDIT_TIME),\n        takeUntil(this.destroy$)\n      )\n      .subscribe({\n        next: selectedItems => {\n          this.selectedItemsChange.emit(selectedItems);\n          this.select.emit(selectedItems);\n        },\n        complete: () => {\n          this.selectedItemsChange.emit([]);\n        }\n      });\n  }\n\n  private _observeSelectableItems() {\n    // Listen for updates and either select or deselect an item\n    this.updateItems$\n      .pipe(\n        withLatestFrom(this._selectedItems$),\n        takeUntil(this.destroy$)\n      )\n      .subscribe(([update, selectedItems]: [UpdateAction, any[]]) => {\n        const item = update.item;\n\n        switch (update.type) {\n          case UpdateActions.Add:\n            if (this._addItem(item, selectedItems)) {\n              item._select();\n            }\n            break;\n          case UpdateActions.Remove:\n            if (this._removeItem(item, selectedItems)) {\n              item._deselect();\n            }\n            break;\n        }\n      });\n\n    // Update the container as well as all selectable items if the list has changed\n    this.$selectableItems.changes\n      .pipe(\n        withLatestFrom(this._selectedItems$),\n        observeOn(asyncScheduler),\n        takeUntil(this.destroy$)\n      )\n      .subscribe(([items, selectedItems]: [QueryList<SelectItemDirective>, any[]]) => {\n        const newList = items.toArray();\n        const removedItems = selectedItems.filter(item => !newList.includes(item.value));\n\n        if (removedItems.length) {\n          removedItems.forEach(item => this._removeItem(item, selectedItems));\n        }\n\n        this.update();\n      });\n  }\n\n  private _observeBoundingRectChanges() {\n    this.ngZone.runOutsideAngular(() => {\n      const resize$ = fromEvent(window, 'resize');\n      const windowScroll$ = fromEvent(window, 'scroll');\n      const containerScroll$ = fromEvent(this.host, 'scroll');\n\n      merge(resize$, windowScroll$, containerScroll$)\n        .pipe(\n          startWith('INITIAL_UPDATE'),\n          auditTime(AUDIT_TIME),\n          takeUntil(this.destroy$)\n        )\n        .subscribe(() => {\n          this.update();\n        });\n    });\n  }\n\n  private _initSelectionOutputs(mousedown$: Observable<MouseEvent>, mouseup$: Observable<MouseEvent>) {\n    mousedown$\n      .pipe(\n        filter(event => this._cursorWithinHost(event)),\n        tap(() => this.selectionStarted.emit()),\n        concatMapTo(mouseup$.pipe(first())),\n        withLatestFrom(this._selectedItems$),\n        map(([, items]) => items),\n        takeUntil(this.destroy$)\n      )\n      .subscribe(items => {\n        this.selectionEnded.emit(items);\n      });\n  }\n\n  private _calculateBoundingClientRect() {\n    this.host.boundingClientRect = calculateBoundingClientRect(this.host);\n  }\n\n  private _cursorWithinHost(event: MouseEvent) {\n    return cursorWithinElement(event, this.host);\n  }\n\n  private _onMouseUp() {\n    this._flushItems();\n    this.renderer.removeClass(document.body, NO_SELECT_CLASS);\n  }\n\n  private _onMouseDown(event: MouseEvent) {\n    if (this.shortcuts.disableSelection(event) || this.disabled) {\n      return;\n    }\n\n    clearSelection(window);\n\n    if (!this.disableDrag) {\n      this.renderer.addClass(document.body, NO_SELECT_CLASS);\n    }\n\n    const mousePoint = getMousePosition(event);\n\n    this.$selectableItems.forEach((item, index) => {\n      const itemRect = item.getBoundingClientRect();\n      const withinBoundingBox = inBoundingBox(mousePoint, itemRect);\n\n      if (this.shortcuts.extendedSelectionShortcut(event)) {\n        return;\n      }\n\n      const shouldAdd =\n        (withinBoundingBox &&\n          !this.shortcuts.toggleSingleItem(event) &&\n          !this.selectMode &&\n          !this.selectWithShortcut) ||\n        (withinBoundingBox && this.shortcuts.toggleSingleItem(event) && !item.selected) ||\n        (!withinBoundingBox && this.shortcuts.toggleSingleItem(event) && item.selected) ||\n        (withinBoundingBox && !item.selected && this.selectMode) ||\n        (!withinBoundingBox && item.selected && this.selectMode);\n\n      const shouldRemove =\n        (!withinBoundingBox &&\n          !this.shortcuts.toggleSingleItem(event) &&\n          !this.selectMode &&\n          !this.selectWithShortcut) ||\n        (!withinBoundingBox && this.shortcuts.toggleSingleItem(event) && !item.selected) ||\n        (withinBoundingBox && this.shortcuts.toggleSingleItem(event) && item.selected) ||\n        (!withinBoundingBox && !item.selected && this.selectMode) ||\n        (withinBoundingBox && item.selected && this.selectMode);\n\n      if (shouldAdd) {\n        this._selectItem(item);\n      } else if (shouldRemove) {\n        this._deselectItem(item);\n      }\n    });\n  }\n\n  private _selectItems(event: Event) {\n    const selectionBox = calculateBoundingClientRect(this.$selectBox.nativeElement);\n\n    this.$selectableItems.forEach(item => {\n      if (this._isExtendedSelection(event)) {\n        this._extendedSelectionMode(selectionBox, item, event);\n      } else {\n        this._normalSelectionMode(selectionBox, item, event);\n      }\n    });\n  }\n\n  private _isExtendedSelection(event: Event) {\n    return this.shortcuts.extendedSelectionShortcut(event) && this.selectOnDrag;\n  }\n\n  private _normalSelectionMode(selectBox, item: SelectItemDirective, event: Event) {\n    const inSelection = boxIntersects(selectBox, item.getBoundingClientRect());\n\n    const shouldAdd = inSelection && !item.selected && !this.shortcuts.removeFromSelection(event);\n\n    const shouldRemove =\n      (!inSelection && item.selected && !this.shortcuts.addToSelection(event)) ||\n      (inSelection && item.selected && this.shortcuts.removeFromSelection(event));\n\n    if (shouldAdd) {\n      this._selectItem(item);\n    } else if (shouldRemove) {\n      this._deselectItem(item);\n    }\n  }\n\n  private _extendedSelectionMode(selectBox, item: SelectItemDirective, event: Event) {\n    const inSelection = boxIntersects(selectBox, item.getBoundingClientRect());\n\n    const shoudlAdd =\n      (inSelection && !item.selected && !this.shortcuts.removeFromSelection(event) && !this._tmpItems.has(item)) ||\n      (inSelection && item.selected && this.shortcuts.removeFromSelection(event) && !this._tmpItems.has(item));\n\n    const shouldRemove =\n      (!inSelection && item.selected && this.shortcuts.addToSelection(event) && this._tmpItems.has(item)) ||\n      (!inSelection && !item.selected && this.shortcuts.removeFromSelection(event) && this._tmpItems.has(item));\n\n    if (shoudlAdd) {\n      item.selected ? item._deselect() : item._select();\n\n      const action = this.shortcuts.removeFromSelection(event)\n        ? Action.Delete\n        : this.shortcuts.addToSelection(event)\n        ? Action.Add\n        : Action.None;\n\n      this._tmpItems.set(item, action);\n    } else if (shouldRemove) {\n      this.shortcuts.removeFromSelection(event) ? item._select() : item._deselect();\n      this._tmpItems.delete(item);\n    }\n  }\n\n  private _flushItems() {\n    this._tmpItems.forEach((action, item) => {\n      if (action === Action.Add) {\n        this._selectItem(item);\n      }\n\n      if (action === Action.Delete) {\n        this._deselectItem(item);\n      }\n    });\n\n    this._tmpItems.clear();\n  }\n\n  private _addItem(item: SelectItemDirective, selectedItems: Array<any>) {\n    let success = false;\n\n    if (!this._hasItem(item, selectedItems)) {\n      success = true;\n      selectedItems.push(item.value);\n      this._selectedItems$.next(selectedItems);\n      this.itemSelected.emit(item.value);\n    }\n\n    return success;\n  }\n\n  private _removeItem(item: SelectItemDirective, selectedItems: Array<any>) {\n    let success = false;\n    const value = item instanceof SelectItemDirective ? item.value : item;\n    const index = selectedItems.indexOf(value);\n\n    if (index > -1) {\n      success = true;\n      selectedItems.splice(index, 1);\n      this._selectedItems$.next(selectedItems);\n      this.itemDeselected.emit(item.value);\n    }\n\n    return success;\n  }\n\n  private _toggleItem(item: SelectItemDirective) {\n    if (item.selected) {\n      this._deselectItem(item);\n    } else {\n      this._selectItem(item);\n    }\n  }\n\n  private _selectItem(item: SelectItemDirective) {\n    this.updateItems$.next({ type: UpdateActions.Add, item });\n  }\n\n  private _deselectItem(item: SelectItemDirective) {\n    this.updateItems$.next({ type: UpdateActions.Remove, item });\n  }\n\n  private _hasItem(item: SelectItemDirective, selectedItems: Array<any>) {\n    return selectedItems.includes(item.value);\n  }\n}\n","import { DragToSelectConfig } from './models';\n\nexport const DEFAULT_CONFIG: DragToSelectConfig = {\n  selectedClass: 'selected',\n  shortcuts: {\n    disableSelection: 'alt',\n    toggleSingleItem: 'meta',\n    addToSelection: 'shift',\n    removeFromSelection: 'shift+meta'\n  }\n};\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { SelectContainerComponent } from './select-container.component';\nimport { SelectItemDirective } from './select-item.directive';\nimport { ShortcutService } from './shortcut.service';\nimport { DragToSelectConfig } from './models';\nimport { CONFIG, USER_CONFIG } from './tokens';\nimport { DEFAULT_CONFIG } from './config';\nimport { mergeDeep } from './utils';\n\nconst COMPONENTS = [SelectContainerComponent, SelectItemDirective];\n\nexport function CONFIG_FACTORY(config: Partial<DragToSelectConfig>) {\n  return mergeDeep(DEFAULT_CONFIG, config);\n}\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [...COMPONENTS],\n  exports: [...COMPONENTS]\n})\nexport class DragToSelectModule {\n  static forRoot(config: Partial<DragToSelectConfig> = {}): ModuleWithProviders {\n    return {\n      ngModule: DragToSelectModule,\n      providers: [\n        ShortcutService,\n        { provide: USER_CONFIG, useValue: config },\n        {\n          provide: CONFIG,\n          useFactory: CONFIG_FACTORY,\n          deps: [USER_CONFIG]\n        }\n      ]\n    };\n  }\n}\n"]}