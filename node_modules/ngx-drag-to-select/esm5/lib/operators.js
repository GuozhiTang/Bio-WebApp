/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { filter, map, withLatestFrom, distinctUntilChanged } from 'rxjs/operators';
import { getRelativeMousePosition, hasMinimumSize } from './utils';
/** @type {?} */
export var createSelectBox = function (container) { return function (source) {
    return source.pipe(map(function (_a) {
        var _b = tslib_1.__read(_a, 3), event = _b[0], opacity = _b[1], _c = _b[2], x = _c.x, y = _c.y;
        // Type annotation is required here, because `getRelativeMousePosition` returns a `MousePosition`,
        // the TS compiler cannot figure out the shape of this type.
        /** @type {?} */
        var mousePosition = getRelativeMousePosition(event, container);
        /** @type {?} */
        var width = opacity > 0 ? mousePosition.x - x : 0;
        /** @type {?} */
        var height = opacity > 0 ? mousePosition.y - y : 0;
        return {
            top: height < 0 ? mousePosition.y : y,
            left: width < 0 ? mousePosition.x : x,
            width: Math.abs(width),
            height: Math.abs(height),
            opacity: opacity
        };
    }));
}; };
/** @type {?} */
export var whenSelectBoxVisible = function (selectBox$) { return function (source) {
    return source.pipe(withLatestFrom(selectBox$), filter(function (_a) {
        var _b = tslib_1.__read(_a, 2), selectBox = _b[1];
        return hasMinimumSize(selectBox, 0, 0);
    }), map(function (_a) {
        var _b = tslib_1.__read(_a, 2), event = _b[0], _ = _b[1];
        return event;
    }));
}; };
/** @type {?} */
export var distinctKeyEvents = function () { return function (source) {
    return source.pipe(distinctUntilChanged(function (prev, curr) {
        return prev.keyCode === curr.keyCode;
    }));
}; };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlcmF0b3JzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LWRyYWctdG8tc2VsZWN0LyIsInNvdXJjZXMiOlsibGliL29wZXJhdG9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLE9BQU8sRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLGNBQWMsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRW5GLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxjQUFjLEVBQUUsTUFBTSxTQUFTLENBQUM7O0FBRW5FLE1BQU0sS0FBTyxlQUFlLEdBQUcsVUFBQyxTQUE4QixJQUFLLE9BQUEsVUFDakUsTUFBa0M7SUFFbEMsT0FBQSxNQUFNLENBQUMsSUFBSSxDQUNULEdBQUcsQ0FBQyxVQUFDLEVBQTBCO1lBQTFCLDBCQUEwQixFQUF6QixhQUFLLEVBQUUsZUFBTyxFQUFFLFVBQVEsRUFBTixRQUFDLEVBQUUsUUFBQzs7OztZQUdwQixhQUFhLEdBQWtCLHdCQUF3QixDQUFDLEtBQUssRUFBRSxTQUFTLENBQUM7O1lBRXpFLEtBQUssR0FBRyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7WUFDN0MsTUFBTSxHQUFHLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXBELE9BQU87WUFDTCxHQUFHLEVBQUUsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyQyxJQUFJLEVBQUUsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUM7WUFDdEIsTUFBTSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDO1lBQ3hCLE9BQU8sU0FBQTtTQUNSLENBQUM7SUFDSixDQUFDLENBQUMsQ0FDSDtBQWpCRCxDQWlCQyxFQXBCZ0UsQ0FvQmhFOztBQUVILE1BQU0sS0FBTyxvQkFBb0IsR0FBRyxVQUFDLFVBQXlDLElBQUssT0FBQSxVQUFDLE1BQXlCO0lBQzNHLE9BQUEsTUFBTSxDQUFDLElBQUksQ0FDVCxjQUFjLENBQUMsVUFBVSxDQUFDLEVBQzFCLE1BQU0sQ0FBQyxVQUFDLEVBQWE7WUFBYiwwQkFBYSxFQUFWLGlCQUFTO1FBQU0sT0FBQSxjQUFjLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFBL0IsQ0FBK0IsQ0FBQyxFQUMxRCxHQUFHLENBQUMsVUFBQyxFQUFVO1lBQVYsMEJBQVUsRUFBVCxhQUFLLEVBQUUsU0FBQztRQUFNLE9BQUEsS0FBSztJQUFMLENBQUssQ0FBQyxDQUMzQjtBQUpELENBSUMsRUFMZ0YsQ0FLaEY7O0FBRUgsTUFBTSxLQUFPLGlCQUFpQixHQUFHLGNBQU0sT0FBQSxVQUFDLE1BQWlDO0lBQ3ZFLE9BQUEsTUFBTSxDQUFDLElBQUksQ0FDVCxvQkFBb0IsQ0FBQyxVQUFDLElBQUksRUFBRSxJQUFJO1FBQzlCLE9BQU8sSUFBSSxDQUFDLE9BQU8sS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3ZDLENBQUMsQ0FBQyxDQUNIO0FBSkQsQ0FJQyxFQUxvQyxDQUtwQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUsIHBpcGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGZpbHRlciwgbWFwLCB3aXRoTGF0ZXN0RnJvbSwgZGlzdGluY3RVbnRpbENoYW5nZWQgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBNb3VzZVBvc2l0aW9uLCBTZWxlY3RCb3gsIFNlbGVjdEJveElucHV0LCBTZWxlY3RDb250YWluZXJIb3N0IH0gZnJvbSAnLi9tb2RlbHMnO1xuaW1wb3J0IHsgZ2V0UmVsYXRpdmVNb3VzZVBvc2l0aW9uLCBoYXNNaW5pbXVtU2l6ZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlU2VsZWN0Qm94ID0gKGNvbnRhaW5lcjogU2VsZWN0Q29udGFpbmVySG9zdCkgPT4gKFxuICBzb3VyY2U6IE9ic2VydmFibGU8U2VsZWN0Qm94SW5wdXQ+XG4pOiBPYnNlcnZhYmxlPFNlbGVjdEJveDxudW1iZXI+PiA9PlxuICBzb3VyY2UucGlwZShcbiAgICBtYXAoKFtldmVudCwgb3BhY2l0eSwgeyB4LCB5IH1dKSA9PiB7XG4gICAgICAvLyBUeXBlIGFubm90YXRpb24gaXMgcmVxdWlyZWQgaGVyZSwgYmVjYXVzZSBgZ2V0UmVsYXRpdmVNb3VzZVBvc2l0aW9uYCByZXR1cm5zIGEgYE1vdXNlUG9zaXRpb25gLFxuICAgICAgLy8gdGhlIFRTIGNvbXBpbGVyIGNhbm5vdCBmaWd1cmUgb3V0IHRoZSBzaGFwZSBvZiB0aGlzIHR5cGUuXG4gICAgICBjb25zdCBtb3VzZVBvc2l0aW9uOiBNb3VzZVBvc2l0aW9uID0gZ2V0UmVsYXRpdmVNb3VzZVBvc2l0aW9uKGV2ZW50LCBjb250YWluZXIpO1xuXG4gICAgICBjb25zdCB3aWR0aCA9IG9wYWNpdHkgPiAwID8gbW91c2VQb3NpdGlvbi54IC0geCA6IDA7XG4gICAgICBjb25zdCBoZWlnaHQgPSBvcGFjaXR5ID4gMCA/IG1vdXNlUG9zaXRpb24ueSAtIHkgOiAwO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3A6IGhlaWdodCA8IDAgPyBtb3VzZVBvc2l0aW9uLnkgOiB5LFxuICAgICAgICBsZWZ0OiB3aWR0aCA8IDAgPyBtb3VzZVBvc2l0aW9uLnggOiB4LFxuICAgICAgICB3aWR0aDogTWF0aC5hYnMod2lkdGgpLFxuICAgICAgICBoZWlnaHQ6IE1hdGguYWJzKGhlaWdodCksXG4gICAgICAgIG9wYWNpdHlcbiAgICAgIH07XG4gICAgfSlcbiAgKTtcblxuZXhwb3J0IGNvbnN0IHdoZW5TZWxlY3RCb3hWaXNpYmxlID0gKHNlbGVjdEJveCQ6IE9ic2VydmFibGU8U2VsZWN0Qm94PG51bWJlcj4+KSA9PiAoc291cmNlOiBPYnNlcnZhYmxlPEV2ZW50PikgPT5cbiAgc291cmNlLnBpcGUoXG4gICAgd2l0aExhdGVzdEZyb20oc2VsZWN0Qm94JCksXG4gICAgZmlsdGVyKChbLCBzZWxlY3RCb3hdKSA9PiBoYXNNaW5pbXVtU2l6ZShzZWxlY3RCb3gsIDAsIDApKSxcbiAgICBtYXAoKFtldmVudCwgX10pID0+IGV2ZW50KVxuICApO1xuXG5leHBvcnQgY29uc3QgZGlzdGluY3RLZXlFdmVudHMgPSAoKSA9PiAoc291cmNlOiBPYnNlcnZhYmxlPEtleWJvYXJkRXZlbnQ+KSA9PlxuICBzb3VyY2UucGlwZShcbiAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgocHJldiwgY3VycikgPT4ge1xuICAgICAgcmV0dXJuIHByZXYua2V5Q29kZSA9PT0gY3Vyci5rZXlDb2RlO1xuICAgIH0pXG4gICk7XG4iXX0=